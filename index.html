<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Auraa Billing</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family: Arial;
  background:#f2f2f2;
  margin:0;
  padding:10px;
}
.box{
  background:#fff;
  padding:12px;
  border-radius:8px;
  margin-bottom:12px;
}
.hidden{display:none}
input,textarea,select,button{
  width:100%;
  padding:8px;
  margin-top:6px;
}
button{
  background:#1e3a8a;
  color:#fff;
  border:none;
  border-radius:6px;
}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}
th,td{
  border:1px solid #ccc;
  padding:6px;
  font-size:12px;
  text-align:center;
}
th{background:#e5e7eb}

/* ðŸ”¥ THERMAL PRINT */
@media print{
  body{width:58mm;margin:0;font-size:12px;background:#fff}
  button{display:none}
  .box{box-shadow:none}
}
</style>
</head>

<body>

<div class="box">
<h3>Customer</h3>
<input id="custName" placeholder="Customer Name">
<input id="custMobile" placeholder="Mobile">
</div>

<div class="box">
<h3>Add Item</h3>
<input id="itemName" placeholder="Item">
<input id="itemPrice" type="number" placeholder="Price">
<input id="itemQty" type="number" placeholder="Qty">
<button onclick="addItem()">Add Item</button>
</div>

<div class="box">
<table>
<thead>
<tr><th>#</th><th>Item</th><th>Price</th><th>Qty</th><th>Amt</th></tr>
</thead>
<tbody id="itemList"></tbody>
</table>
</div>

<div class="box">
<h3>Total: â‚¹ <span id="finalTotal">0</span></h3>
<button onclick="generateInvoice()">Generate Invoice</button>
</div>

<!-- INVOICE -->
<div class="box hidden" id="invoiceBox">
<h3>Invoice</h3>
<p><b>Owner:</b> Priyansh Mehta</p>
<p><b>Address:</b> Dungarpur</p>
<p><b>Date:</b> <span id="invDate"></span></p>
<p><b>Customer:</b> <span id="invCust"></span></p>

<table>
<thead>
<tr><th>#</th><th>Item</th><th>Price</th><th>Qty</th><th>Amt</th></tr>
</thead>
<tbody id="invItems"></tbody>
</table>

<h3>Total â‚¹ <span id="invTotal"></span></h3>

<button onclick="printInvoice()">Download PDF</button>
<button onclick="shareWhatsApp()">WhatsApp</button>
</div>

<script>
let items=[];

function addItem(){
  let n=itemName.value;
  let p=+itemPrice.value;
  let q=+itemQty.value;
  if(!n||!p||!q)return;
  items.push({n,p,q,a:p*q});
  render();
  itemName.value=itemPrice.value=itemQty.value="";
}

function render(){
  itemList.innerHTML="";
  let t=0;
  items.forEach((i,x)=>{
    t+=i.a;
    itemList.innerHTML+=`<tr>
    <td>${x+1}</td><td>${i.n}</td><td>${i.p}</td><td>${i.q}</td><td>${i.a}</td>
    </tr>`;
  });
  finalTotal.innerText=t;
}

function generateInvoice(){
  if(items.length==0)return;
  invoiceBox.classList.remove("hidden");
  invCust.innerText=custName.value;
  invDate.innerText=new Date().toLocaleDateString();
  invTotal.innerText=finalTotal.innerText;
  invItems.innerHTML="";
  items.forEach((i,x)=>{
    invItems.innerHTML+=`<tr>
    <td>${x+1}</td><td>${i.n}</td><td>${i.p}</td><td>${i.q}</td><td>${i.a}</td>
    </tr>`;
  });
}

function printInvoice(){
  let name=invCust.innerText||"invoice";
  document.title=name.replace(/[^a-zA-Z0-9]/g,"_")+".pdf";
  setTimeout(()=>window.print(),300);
}

function shareWhatsApp(){
  let msg=`Invoice Ready
Customer: ${invCust.innerText}
Total: â‚¹${invTotal.innerText}`;
  window.open("https://wa.me/?text="+encodeURIComponent(msg));
}
</script>

</body>
</html>
